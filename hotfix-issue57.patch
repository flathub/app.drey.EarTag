From 5c6841acdce78a94da830f957a0bda365514a7ef Mon Sep 17 00:00:00 2001
From: knuxify <knuxify@gmail.com>
Date: Sun, 25 Dec 2022 11:58:58 +0100
Subject: [PATCH] backends: mutagen-id3: fix discnumber issues

Fixes #57.
---
 src/backends/file_mutagen_id3.py | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/src/backends/file_mutagen_id3.py b/src/backends/file_mutagen_id3.py
index 275f2ef..c8b6161 100644
--- a/src/backends/file_mutagen_id3.py
+++ b/src/backends/file_mutagen_id3.py
@@ -329,3 +329,18 @@ class EartagFileMutagenID3(EartagFileMutagenCommon):
             self.mg_file.tags.setall('TDOR', [mutagen.id3.TDOR(encoding=3, text=[str(value)])])
 
         self.mark_as_modified('releaseyear')
+
+    @GObject.Property(type=int)
+    def discnumber(self):
+        discnum_raw = self.get_tag('discnumber')
+        if not discnum_raw:
+            return None
+
+        if '/' in discnum_raw:
+            return int(discnum_raw.split('/')[0])
+        return int(discnum_raw)
+
+    @discnumber.setter
+    def discnumber(self, value):
+        self.set_tag('discnumber', f'{value}/{value}')
+        self.mark_as_modified('discnumber')
-- 
2.39.0

